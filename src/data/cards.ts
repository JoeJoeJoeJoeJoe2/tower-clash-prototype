import { CardDefinition } from '@/types/game';

// Size affects visual scale and movement speed multiplier
// tiny: 0.6x scale, +30% speed | small: 0.8x scale, +15% speed | medium: 1.0x scale | large: 1.2x scale, -15% speed | huge: 1.4x scale, -30% speed
export const SIZE_SPEED_MULTIPLIERS = {
  tiny: 1.30,
  small: 1.15,
  medium: 1.0,
  large: 0.85,
  huge: 0.70
};

export const SIZE_SCALE = {
  tiny: 0.6,
  small: 0.8,
  medium: 1.0,
  large: 1.2,
  huge: 1.4
};

export const allCards: CardDefinition[] = [
  // ==================== COMMON TROOPS ====================
  // Low cost, basic stats, starter-friendly
  // Size-based damage: tiny ~150, small ~200, medium ~300, large ~450, huge ~600
  // Health: around 500 base, scaled by role
  
  {
    id: 'knight',
    name: 'Knight',
    type: 'mini-tank',
    elixirCost: 3,
    emoji: '‚öîÔ∏è',
    health: 600,
    damage: 300,
    attackSpeed: 0.77,
    moveSpeed: 35,
    range: 30,
    hitSpeed: 1.3,
    description: 'A sturdy melee fighter with a big sword',
    rarity: 'common',
    color: '#d97706',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 1,
    size: 'medium'
  },
  {
    id: 'archers',
    name: 'Archers',
    type: 'troop',
    elixirCost: 3,
    emoji: 'üèπ',
    health: 250,
    damage: 180,
    attackSpeed: 0.83,
    moveSpeed: 35,
    range: 100,
    hitSpeed: 1.2,
    description: 'A pair of sharpshooters',
    rarity: 'common',
    color: '#ec4899',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'both',
    count: 2,
    size: 'small'
  },
  {
    id: 'goblins',
    name: 'Goblins',
    type: 'troop',
    elixirCost: 2,
    emoji: 'üë∫',
    health: 180,
    damage: 170,
    attackSpeed: 0.91,
    moveSpeed: 50,
    range: 30,
    hitSpeed: 1.1,
    description: 'Fast and cheap swarm',
    rarity: 'common',
    color: '#22c55e',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 3,
    size: 'small'
  },
  {
    id: 'skeletons',
    name: 'Skeletons',
    type: 'troop',
    elixirCost: 1,
    emoji: 'üíÄ',
    health: 80,
    damage: 150,
    attackSpeed: 1.0,
    moveSpeed: 42,
    range: 30,
    hitSpeed: 1.0,
    description: 'Three spooky scary skeletons',
    rarity: 'common',
    color: '#a1a1aa',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 3,
    size: 'tiny'
  },
  {
    id: 'bomber',
    name: 'Bomber',
    type: 'troop',
    elixirCost: 2,
    emoji: 'üí£',
    health: 280,
    damage: 220,
    attackSpeed: 0.56,
    moveSpeed: 35,
    range: 100,
    hitSpeed: 1.8,
    description: 'Throws explosive bombs - splash damage',
    rarity: 'common',
    color: '#f97316',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    splashRadius: 40,
    count: 1,
    size: 'small'
  },
  {
    id: 'minions',
    name: 'Minions',
    type: 'troop',
    elixirCost: 3,
    emoji: 'ü¶á',
    health: 150,
    damage: 160,
    attackSpeed: 1.0,
    moveSpeed: 50,
    range: 35,
    hitSpeed: 1.0,
    description: 'Flying blue creatures',
    rarity: 'common',
    color: '#3b82f6',
    deployCooldown: 1.0,
    isFlying: true,
    targetType: 'both',
    count: 3,
    size: 'tiny'
  },

  // ==================== RARE TROOPS ====================
  // Medium cost, stronger stats, specialized roles
  
  {
    id: 'royal-recruits',
    name: 'Royal Recruits',
    type: 'mini-tank',
    elixirCost: 7,
    emoji: 'üõ°Ô∏è',
    health: 350,
    damage: 180,
    attackSpeed: 0.77,
    moveSpeed: 30,
    range: 30,
    hitSpeed: 1.3,
    description: 'Six recruits with shields form a defensive line',
    rarity: 'common',
    color: '#2563eb',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 6,
    size: 'small'
  },
  {
    id: 'giant',
    name: 'Giant',
    type: 'tank',
    elixirCost: 5,
    emoji: 'üóø',
    health: 1800,
    damage: 450,
    attackSpeed: 0.67,
    moveSpeed: 28,
    range: 30,
    hitSpeed: 1.5,
    description: 'Slow but incredibly tanky - targets buildings',
    rarity: 'rare',
    color: '#78716c',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'buildings',
    count: 1,
    size: 'huge'
  },
  {
    id: 'wizard',
    name: 'Wizard',
    type: 'troop',
    elixirCost: 5,
    emoji: 'üî•',
    health: 450,
    damage: 350,
    attackSpeed: 0.59,
    moveSpeed: 35,
    range: 130,
    hitSpeed: 1.7,
    description: 'Powerful fireball magic - splash damage',
    rarity: 'rare',
    color: '#ea580c',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'both',
    splashRadius: 50,
    count: 1,
    size: 'medium'
  },
  {
    id: 'valkyrie',
    name: 'Valkyrie',
    type: 'mini-tank',
    elixirCost: 4,
    emoji: 'ü™ì',
    health: 700,
    damage: 320,
    attackSpeed: 0.67,
    moveSpeed: 35,
    range: 35,
    hitSpeed: 1.5,
    description: 'Spins and hits all ground units around her',
    rarity: 'rare',
    color: '#f472b6',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    splashRadius: 60,
    count: 1,
    size: 'medium'
  },
  {
    id: 'musketeer',
    name: 'Musketeer',
    type: 'troop',
    elixirCost: 4,
    emoji: 'üéØ',
    health: 400,
    damage: 280,
    attackSpeed: 0.91,
    moveSpeed: 35,
    range: 180,
    hitSpeed: 1.1,
    description: 'Long range shooter - high single target DPS',
    rarity: 'rare',
    color: '#0891b2',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'both',
    count: 1,
    size: 'medium'
  },
  {
    id: 'baby-dragon',
    name: 'Baby Dragon',
    type: 'troop',
    elixirCost: 4,
    emoji: 'üêâ',
    health: 600,
    damage: 280,
    attackSpeed: 0.67,
    moveSpeed: 42,
    range: 100,
    hitSpeed: 1.5,
    description: 'Flying fire breather - splash damage',
    rarity: 'rare',
    color: '#7c3aed',
    deployCooldown: 1.0,
    isFlying: true,
    targetType: 'both',
    splashRadius: 45,
    count: 1,
    size: 'medium'
  },
  {
    id: 'hog-rider',
    name: 'Hog Rider',
    type: 'troop',
    elixirCost: 4,
    emoji: 'üêó',
    health: 800,
    damage: 400,
    attackSpeed: 0.63,
    moveSpeed: 90, // Very fast - like Clash Royale
    range: 30,
    hitSpeed: 1.6,
    description: 'Fast tower rusher - targets buildings only',
    rarity: 'rare',
    color: '#b45309',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'buildings',
    count: 1,
    size: 'large'
  },

  // ==================== EPIC TROOPS ====================
  // Higher cost, powerful unique abilities
  
  {
    id: 'prince',
    name: 'Prince',
    type: 'mini-tank',
    elixirCost: 5,
    emoji: 'üèá',
    health: 750,
    damage: 480,
    attackSpeed: 0.71,
    moveSpeed: 75, // Fast - charges to very fast in Clash Royale
    range: 35,
    hitSpeed: 1.4,
    description: 'Charges into battle for double damage',
    rarity: 'epic',
    color: '#3b82f6',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 1,
    size: 'large'
  },
  {
    id: 'witch',
    name: 'Witch',
    type: 'troop',
    elixirCost: 5,
    emoji: 'üßô‚Äç‚ôÄÔ∏è',
    health: 500,
    damage: 250,
    attackSpeed: 0.71,
    moveSpeed: 35,
    range: 130,
    hitSpeed: 1.4,
    description: 'Summons skeletons to fight - splash damage',
    rarity: 'epic',
    color: '#a855f7',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'both',
    splashRadius: 35,
    count: 1,
    size: 'medium',
    // Witch spawns skeletons every 5 seconds
    spawnInterval: 5,
    spawnCardId: 'skeletons',
    spawnCount: 3
  },
  {
    id: 'mini-pekka',
    name: 'Mini P.E.K.K.A',
    type: 'mini-tank',
    elixirCost: 4,
    emoji: 'ü§ñ',
    health: 550,
    damage: 550, // Exception: high damage dealer
    attackSpeed: 0.56,
    moveSpeed: 42,
    range: 30,
    hitSpeed: 1.8,
    description: 'Pancakes! Devastating single-target damage',
    rarity: 'epic',
    color: '#6366f1',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 1,
    size: 'small'
  },
  {
    id: 'balloon',
    name: 'Balloon',
    type: 'troop',
    elixirCost: 5,
    emoji: 'üéà',
    health: 700,
    damage: 600, // Large unit - high damage
    attackSpeed: 0.33,
    moveSpeed: 30,
    range: 35,
    hitSpeed: 3.0,
    description: 'Death from above - targets buildings only',
    rarity: 'epic',
    color: '#ef4444',
    deployCooldown: 1.0,
    isFlying: true,
    targetType: 'buildings',
    count: 1,
    size: 'large'
  },

  // ==================== LEGENDARY TROOPS ====================
  // Premium cards with unique mechanics
  
  {
    id: 'pekka',
    name: 'P.E.K.K.A',
    type: 'tank',
    elixirCost: 7,
    emoji: 'ü¶æ',
    health: 1500,
    damage: 600, // Huge unit - max damage
    attackSpeed: 0.56,
    moveSpeed: 28,
    range: 35,
    hitSpeed: 1.8,
    description: 'The ultimate war machine - massive damage',
    rarity: 'legendary',
    color: '#1e40af',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 1,
    size: 'huge'
  },
  {
    id: 'electro-wizard',
    name: 'Electro Wizard',
    type: 'troop',
    elixirCost: 4,
    emoji: '‚ö°',
    health: 400,
    damage: 200,
    attackSpeed: 0.56,
    moveSpeed: 35,
    range: 130,
    hitSpeed: 1.8,
    description: 'Zaps 2 enemies at once - stuns on hit',
    rarity: 'legendary',
    color: '#0ea5e9',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'both',
    count: 1,
    size: 'medium'
  },
  {
    id: 'princess',
    name: 'Princess',
    type: 'troop',
    elixirCost: 3,
    emoji: 'üë∏',
    health: 200,
    damage: 200,
    attackSpeed: 0.33,
    moveSpeed: 35,
    range: 400, // Incredible range - can hit towers from across the bridge
    hitSpeed: 3.0,
    description: 'Incredible range - outranges everything including towers',
    rarity: 'legendary',
    color: '#f472b6',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'both',
    splashRadius: 40,
    count: 1,
    size: 'small'
  },

  // ==================== CHAMPION TROOPS ====================
  // Highest rarity - unique powerful abilities
  
  {
    id: 'golden-knight',
    name: 'Golden Knight',
    type: 'mini-tank',
    elixirCost: 4,
    emoji: 'üëë',
    health: 1200,
    damage: 250,
    attackSpeed: 0.77,
    moveSpeed: 45,
    range: 30,
    hitSpeed: 1.3,
    description: 'Dashes to next enemy on kill!',
    rarity: 'champion',
    color: '#ffd700',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 1,
    size: 'medium',
    championAbility: 'dash-chain'
  },
  {
    id: 'archer-queen',
    name: 'Archer Queen',
    type: 'troop',
    elixirCost: 5,
    emoji: 'üëëüèπ',
    health: 1000,
    damage: 300,
    attackSpeed: 0.83,
    moveSpeed: 40,
    range: 180,
    hitSpeed: 1.2,
    description: 'Cloaks when damaged below 70% HP!',
    rarity: 'champion',
    color: '#9d4edd',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'both',
    count: 1,
    size: 'medium',
    championAbility: 'cloak'
  },
  {
    id: 'skeleton-king',
    name: 'Skeleton King',
    type: 'mini-tank',
    elixirCost: 4,
    emoji: 'üíÄüëë',
    health: 1400,
    damage: 220,
    attackSpeed: 0.63,
    moveSpeed: 35,
    range: 30,
    hitSpeed: 1.6,
    description: 'Summons skeletons from fallen enemies!',
    rarity: 'champion',
    color: '#6b21a8',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 1,
    size: 'large',
    championAbility: 'soul-summon'
  },
  {
    id: 'mighty-miner',
    name: 'Mighty Miner',
    type: 'mini-tank',
    elixirCost: 4,
    emoji: '‚õèÔ∏è',
    health: 1100,
    damage: 200,
    attackSpeed: 0.77,
    moveSpeed: 38,
    range: 30,
    hitSpeed: 1.3,
    description: 'Burrows to safety at 30% HP!',
    rarity: 'champion',
    color: '#854d0e',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 1,
    size: 'medium',
    championAbility: 'drill'
  },
  {
    id: 'little-prince',
    name: 'Little Prince',
    type: 'troop',
    elixirCost: 3,
    emoji: 'ü§¥',
    health: 800,
    damage: 150,
    attackSpeed: 0.91,
    moveSpeed: 42,
    range: 120,
    hitSpeed: 1.1,
    description: 'Summons guardian at 50% HP!',
    rarity: 'champion',
    color: '#3b82f6',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'both',
    count: 1,
    size: 'small',
    championAbility: 'guardian'
  },
  {
    id: 'monk',
    name: 'Monk',
    type: 'mini-tank',
    elixirCost: 5,
    emoji: 'üßò',
    health: 1300,
    damage: 180,
    attackSpeed: 0.56,
    moveSpeed: 35,
    range: 30,
    hitSpeed: 1.8,
    description: 'Reflects projectiles periodically!',
    rarity: 'champion',
    color: '#f97316',
    deployCooldown: 1.0,
    isFlying: false,
    targetType: 'ground',
    count: 1,
    size: 'medium',
    championAbility: 'reflect'
  },
  // Special troops that replace Princess Towers
  
  {
    id: 'cannoneer',
    name: 'Cannoneer',
    type: 'troop',
    elixirCost: 0, // Tower troops have no elixir cost - they're tower replacements
    emoji: 'üí•',
    health: 2000, // Tower health
    damage: 250, // High single-target damage
    attackSpeed: 0.56,
    moveSpeed: 0, // Stationary
    range: 180,
    hitSpeed: 1.8,
    description: 'Tower troop that fires powerful cannonballs',
    rarity: 'legendary',
    color: '#6b7280',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    count: 1,
    size: 'large',
    splashRadius: 30 // Small splash
  },
  {
    id: 'dagger-duchess',
    name: 'Dagger Duchess',
    type: 'troop',
    elixirCost: 0,
    emoji: 'üó°Ô∏è',
    health: 2000,
    damage: 80, // Lower per-hit damage but very fast
    attackSpeed: 2.5, // Very fast attack speed
    moveSpeed: 0,
    range: 180,
    hitSpeed: 0.4, // Throws daggers rapidly
    description: 'Rapid dagger thrower - stockpiles 8 daggers then reloads',
    rarity: 'legendary',
    color: '#ec4899',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    count: 1,
    size: 'medium'
  },
  {
    id: 'royal-chef',
    name: 'Royal Chef',
    type: 'troop',
    elixirCost: 0,
    emoji: 'üë®‚Äçüç≥',
    health: 2000,
    damage: 180,
    attackSpeed: 0.77,
    moveSpeed: 0,
    range: 180,
    hitSpeed: 1.3,
    description: 'Throws flaming pans - heals nearby allies with food buffs',
    rarity: 'legendary',
    color: '#f59e0b',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    count: 1,
    size: 'medium',
    splashRadius: 25 // Small splash from pans
  },

  // ==================== SPELLS ====================
  // Instant and duration-based effects
  
  {
    id: 'fireball',
    name: 'Fireball',
    type: 'spell',
    elixirCost: 4,
    emoji: 'üî•',
    health: 0,
    damage: 572,
    attackSpeed: 0,
    moveSpeed: 0,
    range: 0,
    description: 'High area damage spell',
    rarity: 'rare',
    color: '#ef4444',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    spellRadius: 80,
    spellEffects: [{ type: 'damage', value: 572 }],
    size: 'medium' // Spells don't move but need size
  },
  {
    id: 'arrows',
    name: 'Arrows',
    type: 'spell',
    elixirCost: 3,
    emoji: 'üèπ',
    health: 0,
    damage: 303,
    attackSpeed: 0,
    moveSpeed: 0,
    range: 0,
    description: 'Swarm killer - wide area',
    rarity: 'common',
    color: '#a855f7',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    spellRadius: 120,
    spellEffects: [{ type: 'damage', value: 303 }],
    size: 'medium'
  },
  {
    id: 'zap',
    name: 'Zap',
    type: 'spell',
    elixirCost: 2,
    emoji: '‚ö°',
    health: 0,
    damage: 192,
    attackSpeed: 0,
    moveSpeed: 0,
    range: 0,
    description: 'Instant damage + stun',
    rarity: 'common',
    color: '#fbbf24',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    spellRadius: 70,
    spellEffects: [
      { type: 'damage', value: 192 },
      { type: 'stun', value: 0.5, duration: 0.5 }
    ],
    size: 'medium'
  },
  {
    id: 'freeze',
    name: 'Freeze',
    type: 'spell',
    elixirCost: 4,
    emoji: '‚ùÑÔ∏è',
    health: 0,
    damage: 95,
    attackSpeed: 0,
    moveSpeed: 0,
    range: 0,
    description: 'Freezes enemies in place',
    rarity: 'epic',
    color: '#06b6d4',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    spellRadius: 90,
    spellDuration: 4.0,
    spellEffects: [
      { type: 'damage', value: 95 },
      { type: 'freeze', value: 1, duration: 4.0 }
    ],
    size: 'medium'
  },
  {
    id: 'poison',
    name: 'Poison',
    type: 'spell',
    elixirCost: 4,
    emoji: '‚ò†Ô∏è',
    health: 0,
    damage: 90,
    attackSpeed: 0,
    moveSpeed: 0,
    range: 0,
    description: 'Damage over time + slow',
    rarity: 'epic',
    color: '#22c55e',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    spellRadius: 100,
    spellDuration: 8.0,
    spellEffects: [
      { type: 'damage', value: 90 },
      { type: 'slow', value: 0.35, duration: 8.0 }
    ],
    size: 'medium'
  },
  {
    id: 'log',
    name: 'The Log',
    type: 'spell',
    elixirCost: 2,
    emoji: 'ü™µ',
    health: 0,
    damage: 240,
    attackSpeed: 0,
    moveSpeed: 0,
    range: 0,
    description: 'Rolling log with knockback',
    rarity: 'legendary',
    color: '#78350f',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'ground',
    spellRadius: 60,
    spellEffects: [
      { type: 'damage', value: 240 },
      { type: 'knockback', value: 50 }
    ],
    size: 'medium'
  },
  {
    id: 'rage',
    name: 'Rage',
    type: 'spell',
    elixirCost: 2,
    emoji: 'üò§',
    health: 0,
    damage: 0,
    attackSpeed: 0,
    moveSpeed: 0,
    range: 0,
    description: 'Boosts movement and attack speed',
    rarity: 'epic',
    color: '#dc2626',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    spellRadius: 100,
    spellDuration: 6.0,
    spellEffects: [
      { type: 'slow', value: -0.35, duration: 6.0 }
    ],
    size: 'medium'
  },

  // ==================== BUILDINGS ====================
  // Defensive and spawner structures
  
  {
    id: 'cannon',
    name: 'Cannon',
    type: 'building',
    elixirCost: 3,
    emoji: 'üî´',
    health: 742,
    damage: 127,
    attackSpeed: 0.91,
    moveSpeed: 0,
    range: 130,
    hitSpeed: 1.1,
    description: 'Ground targeting defense',
    rarity: 'common',
    color: '#6b7280',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'ground',
    buildingLifetime: 30,
    size: 'medium'
  },
  {
    id: 'tesla',
    name: 'Tesla',
    type: 'building',
    elixirCost: 4,
    emoji: '‚ö°',
    health: 954,
    damage: 150,
    attackSpeed: 0.77,
    moveSpeed: 0,
    range: 110,
    hitSpeed: 1.3,
    description: 'Hits air and ground',
    rarity: 'common',
    color: '#0ea5e9',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    buildingLifetime: 35,
    size: 'medium'
  },
  {
    id: 'inferno-tower',
    name: 'Inferno Tower',
    type: 'building',
    elixirCost: 5,
    emoji: 'üî•',
    health: 1408,
    damage: 50,
    attackSpeed: 2.5,
    moveSpeed: 0,
    range: 100,
    description: 'Melts tanks with ramping damage',
    rarity: 'rare',
    color: '#f97316',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    buildingLifetime: 40,
    size: 'large'
  },
  {
    id: 'bomb-tower',
    name: 'Bomb Tower',
    type: 'building',
    elixirCost: 4,
    emoji: 'üí£',
    health: 1126,
    damage: 184,
    attackSpeed: 0.56,
    moveSpeed: 0,
    range: 100,
    hitSpeed: 1.8,
    description: 'Splash damage to ground',
    rarity: 'rare',
    color: '#374151',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'ground',
    buildingLifetime: 35,
    splashRadius: 45,
    size: 'large'
  },
  {
    id: 'goblin-hut',
    name: 'Goblin Hut',
    type: 'building',
    elixirCost: 5,
    emoji: 'üè†',
    health: 925,
    damage: 0,
    attackSpeed: 0,
    moveSpeed: 0,
    range: 0,
    description: 'Spawns Spear Goblins',
    rarity: 'rare',
    color: '#16a34a',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    buildingLifetime: 60,
    spawnInterval: 5.0,
    spawnCardId: 'goblins',
    spawnCount: 1,
    size: 'large'
  },
  {
    id: 'tombstone',
    name: 'Tombstone',
    type: 'building',
    elixirCost: 3,
    emoji: 'ü™¶',
    health: 511,
    damage: 0,
    attackSpeed: 0,
    moveSpeed: 0,
    range: 0,
    description: 'Spawns Skeletons',
    rarity: 'rare',
    color: '#6b7280',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    buildingLifetime: 40,
    spawnInterval: 3.5,
    spawnCardId: 'skeletons',
    spawnCount: 1,
    size: 'medium'
  },
  {
    id: 'furnace',
    name: 'Furnace',
    type: 'building',
    elixirCost: 4,
    emoji: 'üî•',
    health: 960,
    damage: 0,
    attackSpeed: 0,
    moveSpeed: 0,
    range: 0,
    description: 'Spawns Fire Spirits',
    rarity: 'rare',
    color: '#ea580c',
    deployCooldown: 0,
    isFlying: false,
    targetType: 'both',
    buildingLifetime: 50,
    spawnInterval: 10.0,
    spawnCardId: 'bomber',
    spawnCount: 1,
    size: 'medium'
  },
  {
    id: 'x-bow',
    name: 'X-Bow',
    type: 'building',
    elixirCost: 6,
    emoji: 'üéØ',
    health: 1500,
    damage: 52,
    attackSpeed: 4.0,
    moveSpeed: 0,
    range: 400, // Long range - can hit towers from across the bridge
    description: 'Long range siege weapon - targets towers',
    rarity: 'epic',
    color: '#7c3aed',
    deployCooldown: 3.5,
    isFlying: false,
    targetType: 'buildings', // Siege building - targets buildings/towers like Giant
    buildingLifetime: 40,
    size: 'large'
  }
];

// Starting cards for new players - balanced starter deck
export const starterCardIds = ['knight', 'archers', 'goblins', 'skeletons', 'bomber', 'minions', 'giant', 'wizard'];

// Fisher-Yates shuffle for randomizing deck order at battle start
function shuffleArray<T>(array: T[]): T[] {
  const shuffled = [...array];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
}

export function createDeck(cardIds: string[], shuffle = true): CardDefinition[] {
  const cards = cardIds.map(id => allCards.find(c => c.id === id)!).filter(Boolean);
  return shuffle ? shuffleArray(cards) : cards;
}

export function drawHand(deck: CardDefinition[]): { hand: CardDefinition[], remainingDeck: CardDefinition[] } {
  const hand = deck.slice(0, 4);
  const remainingDeck = deck.slice(4);
  return { hand, remainingDeck };
}

export function getCardById(id: string): CardDefinition | undefined {
  return allCards.find(c => c.id === id);
}

// Get effective move speed based on size
export function getEffectiveMoveSpeed(card: CardDefinition): number {
  return Math.round(card.moveSpeed * SIZE_SPEED_MULTIPLIERS[card.size]);
}
